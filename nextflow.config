process.scratch = true
conda.enabled = true
nextflow.enable.moduleBinaries = true

params {
    fastq_r1 = null
    fastq_r2 = null
    prefix = null
    fasta = null
    aligned_file = null
    java_mem = "-Xmx100g"
    fastp_container = "staphb/fastp:latest"
    picard_container = "broadinstitute/picard:latest"
    multiqc_container = "ewels/multiqc:latest"
    samtools_container = "quay.io/biocontainers/samtools:1.21--h96c455f_1"
}

// Process specific settings
process {
    withLabel: 'fastp' {
        container = ${params.fastp_container}
        memory = '4 GB'
        cpus = 1
    }
    
    withLabel: 'samtools' {
        container = ${params.samtools_container}
        memory = '8 GB'
        cpus = 1
    }
    
    withLabel: 'picard' {
        container = ${params.picard_container}
        memory = '100 GB'
        cpus = 1
    }
    
    withLabel: 'multiqc' {
        container = ${params.multiqc_container}
        memory = '4 GB'
        cpus = 1
    }
}

// Execution settings
executor {
    $local {
        cpus = 4
        memory = '100 GB'
    }
}

// Report settings
report {
    enabled = true
    overwrite = true
    file = 'pipeline_report.html'
}

// Timeline settings
timeline {
    enabled = true
    overwrite = true
    file = 'timeline_report.html'
}

// Trace settings
trace {
    enabled = true
    overwrite = true
    file = 'trace.txt'
}

// Docker settings
docker {
    enabled = true
    runOptions = '-u $(id -u):$(id -g)'
    fixOwnership = true
} 